CREATE TABLE IF NOT EXISTS member (
    -- id
    id INT GENERATED BY DEFAULT AS IDENTITY,
    -- email
    email VARCHAR(255) NOT NULL,
    -- name
    name VARCHAR(256) NOT NULL,
    -- create_at
    created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT NOW(),
    -- update_at
    updated_at TIMESTAMP WITHOUT TIME ZONE,
    -- pk
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS setting (
    -- id
    id INT GENERATED BY DEFAULT AS IDENTITY,
    -- member_id
    member_id INT NOT NULL,
    -- limit by date
    limit_task INT NOT NULL,
    -- create_at
    created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT NOW(),
    -- update_at
    updated_at TIMESTAMP WITHOUT TIME ZONE,
    -- pk
    PRIMARY KEY (id),
    -- 1 on 1 with member
    UNIQUE (member_id),

    CONSTRAINT fk_member_id FOREIGN KEY(member_id) REFERENCES member(id)
);

CREATE TABLE IF NOT EXISTS task (
    -- id
    id INT GENERATED BY DEFAULT AS IDENTITY,
    -- email
    member_id INT NOT NULL,
    -- content
    content VARCHAR NOT NULL,
    -- target_date
    target_date DATE NOT NULL,
    -- create_at
    created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL DEFAULT NOW(),
    -- update_at
    updated_at TIMESTAMP WITHOUT TIME ZONE,
    -- pk
    PRIMARY KEY (id),

    CONSTRAINT fk_member_id FOREIGN KEY(member_id) REFERENCES member(id)
);
